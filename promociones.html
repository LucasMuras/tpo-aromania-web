<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Promociones ¬∑ Aroman√≠a</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!-- ====== Header ====== -->
  <header>
    <div class="container nav">
      <a href="index.html" class="brand" aria-label="Inicio - Aroman√≠a">
        <svg viewBox="0 0 64 64" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0%" stop-color="#1e88e5"/><stop offset="100%" stop-color="#f59e0b"/>
          </linearGradient></defs>
          <rect x="2" y="2" width="60" height="60" rx="14" fill="url(#g)"/>
          <path d="M32 16 C36 22,36 30,32 36 C28 30,28 22,32 16 Z" fill="#0b1220"/>
          <path d="M22 24 C26 24,28 28,29 33 C24 32,21 29,22 24 Z" fill="#0b1220"/>
          <path d="M42 24 C38 24,36 28,35 33 C40 32,43 29,42 24 Z" fill="#0b1220"/>
        </svg>
        <span>Aroman√≠a</span>
      </a>
      <nav class="menu">
        <a href="index.html">Inicio</a>
        <a href="nosotros.html">Nosotros</a>
        <a href="productos.html">Productos</a>
        <a href="promociones.html">Promociones</a>
        <a href="contacto.html">Contacto</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- ====== Promociones (cards) ====== -->
    <section class="section">
      <div class="container">
        <span class="eyebrow">Exclusivo Aroman√≠a</span>
        <h2 class="title title-lg" style="margin-top:.5rem;">Promociones de Temporada</h2>
        <p class="lead" style="margin-top:.4rem;">Aprovech√° nuestras ofertas pensadas para llenar tu espacio de buena energ√≠a sin vaciar el bolsillo.</p>

        <div class="cards" style="margin-top:1.5rem;">
          <article class="card"><div class="body">
            <h3>‚ú® Ritual Relax</h3>
            <p>Llevate un <strong>producto de aromaterapia</strong> y obten√© un <strong>40% OFF</strong> en el segundo art√≠culo de menor precio.</p>
          </div></article>

          <article class="card"><div class="body">
            <h3>üïØ D√∫o Arom√°tico</h3>
            <p>Compr√° tres <strong>productos similares</strong> y pag√° solo dos. ¬°El tercero es cortes√≠a de la casa!</p>
          </div></article>

          <article class="card"><div class="body">
            <h3>üåø Bienestar Total</h3>
            <p>Disfrut√° un <strong>10% OFF</strong> en compras superiores a <strong>$35.000</strong> combinando tus productos favoritos.</p>
          </div></article>
        </div>
      </div>
    </section>

    <!-- ====== Calculadora ====== -->
    <section class="section" style="border-top:1px solid rgba(255,255,255,.06); text-align:center;">
      <div class="container" style="max-width:950px;">
        <h2 class="title title-lg">Calcul√° tu ahorro</h2>
        <p class="lead" style="margin-top:.4rem;">Seleccion√° tus productos y descubr√≠ cu√°nto pod√©s ahorrar.</p>

        <form id="promocionesForm" class="panel" style="margin-top:1.5rem; background:var(--card); border-radius:var(--radius); padding:2rem; box-shadow:var(--shadow); text-align:left;">
          <div style="margin-bottom:1rem; text-align:center;">
            <label for="tipoPromo"><strong>Tipo de promoci√≥n:</strong></label><br>
            <select id="tipoPromo" class="form-control" style="margin-top:.5rem; padding:.6rem; border-radius:8px; width:100%; max-width:420px;">
              <option value="">-- Eleg√≠ una promoci√≥n --</option>
              <option value="ritual">Ritual Relax (40% OFF en segundo producto)</option>
              <option value="duo">D√∫o Arom√°tico (3x2 en similares)</option>
              <option value="bienestar">Bienestar Total (10% OFF desde $35.000)</option>
            </select>
          </div>

          <!-- Productos (6) -->
          <div id="productosContainer" style="display:grid; gap:1rem; margin-top:1.5rem;">

            <!-- 1 Velas -->
            <div class="producto-item" style="display:flex; justify-content:space-between; align-items:center; background:#10182b; padding:1rem; border-radius:10px;">
              <label>
                <input type="checkbox" class="producto-checkbox" value="velas" data-precio="9800" data-nombre="Velas arom√°ticas"> Velas arom√°ticas ($9.800)
              </label>
              <div class="cantidad-wrapper" style="display:flex; align-items:center; gap:.3rem;">
                <button type="button" class="btn-cantidad" data-target="cant-velas" data-action="minus">‚àí</button>
                <input type="number" id="cant-velas" class="cantidad-input" min="0" value="0" disabled
                  style="width:72px; text-align:center; padding:.45rem; border-radius:8px; border:1px solid #2a3550; background:#0f172a; color:var(--text);">
                <button type="button" class="btn-cantidad" data-target="cant-velas" data-action="plus">+</button>
              </div>
            </div>

            <!-- 2 Sahumerios -->
            <div class="producto-item" style="display:flex; justify-content:space-between; align-items:center; background:#10182b; padding:1rem; border-radius:10px;">
              <label>
                <input type="checkbox" class="producto-checkbox" value="sahumerios" data-precio="4200" data-nombre="Sahumerios y porta-sahumerios"> Sahumerios y porta-sahumerios ($4.200)
              </label>
              <div class="cantidad-wrapper" style="display:flex; align-items:center; gap:.3rem;">
                <button type="button" class="btn-cantidad" data-target="cant-sahumerios" data-action="minus">‚àí</button>
                <input type="number" id="cant-sahumerios" class="cantidad-input" min="0" value="0" disabled
                  style="width:72px; text-align:center; padding:.45rem; border-radius:8px; border:1px solid #2a3550; background:#0f172a; color:var(--text);">
                <button type="button" class="btn-cantidad" data-target="cant-sahumerios" data-action="plus">+</button>
              </div>
            </div>

            <!-- 3 Difusores -->
            <div class="producto-item" style="display:flex; justify-content:space-between; align-items:center; background:#10182b; padding:1rem; border-radius:10px;">
              <label>
                <input type="checkbox" class="producto-checkbox" value="difusores" data-precio="12900" data-nombre="Difusores de ambiente"> Difusores de ambiente ($12.900)
              </label>
              <div class="cantidad-wrapper" style="display:flex; align-items:center; gap:.3rem;">
                <button type="button" class="btn-cantidad" data-target="cant-difusores" data-action="minus">‚àí</button>
                <input type="number" id="cant-difusores" class="cantidad-input" min="0" value="0" disabled
                  style="width:72px; text-align:center; padding:.45rem; border-radius:8px; border:1px solid #2a3550; background:#0f172a; color:var(--text);">
                <button type="button" class="btn-cantidad" data-target="cant-difusores" data-action="plus">+</button>
              </div>
            </div>

            <!-- 4 Aceites -->
            <div class="producto-item" style="display:flex; justify-content:space-between; align-items:center; background:#10182b; padding:1rem; border-radius:10px;">
              <label>
                <input type="checkbox" class="producto-checkbox" value="aceites" data-precio="10500" data-nombre="Aceites esenciales"> Aceites esenciales ($10.500)
              </label>
              <div class="cantidad-wrapper" style="display:flex; align-items:center; gap:.3rem;">
                <button type="button" class="btn-cantidad" data-target="cant-aceites" data-action="minus">‚àí</button>
                <input type="number" id="cant-aceites" class="cantidad-input" min="0" value="0" disabled
                  style="width:72px; text-align:center; padding:.45rem; border-radius:8px; border:1px solid #2a3550; background:#0f172a; color:var(--text);">
                <button type="button" class="btn-cantidad" data-target="cant-aceites" data-action="plus">+</button>
              </div>
            </div>

            <!-- 5 Jabones / Sales -->
            <div class="producto-item" style="display:flex; justify-content:space-between; align-items:center; background:#10182b; padding:1rem; border-radius:10px;">
              <label>
                <input type="checkbox" class="producto-checkbox" value="sales" data-precio="5800" data-nombre="Sales y jabones naturales"> Sales y jabones naturales ($5.800)
              </label>
              <div class="cantidad-wrapper" style="display:flex; align-items:center; gap:.3rem;">
                <button type="button" class="btn-cantidad" data-target="cant-sales" data-action="minus">‚àí</button>
                <input type="number" id="cant-sales" class="cantidad-input" min="0" value="0" disabled
                  style="width:72px; text-align:center; padding:.45rem; border-radius:8px; border:1px solid #2a3550; background:#0f172a; color:var(--text);">
                <button type="button" class="btn-cantidad" data-target="cant-sales" data-action="plus">+</button>
              </div>
            </div>

            <!-- 6 Kits -->
            <div class="producto-item" style="display:flex; justify-content:space-between; align-items:center; background:#10182b; padding:1rem; border-radius:10px;">
              <label>
                <input type="checkbox" class="producto-checkbox" value="kits" data-precio="16900" data-nombre="Mini kits de regalo"> Mini kits de regalo ($16.900)
              </label>
              <div class="cantidad-wrapper" style="display:flex; align-items:center; gap:.3rem;">
                <button type="button" class="btn-cantidad" data-target="cant-kits" data-action="minus">‚àí</button>
                <input type="number" id="cant-kits" class="cantidad-input" min="0" value="0" disabled
                  style="width:72px; text-align:center; padding:.45rem; border-radius:8px; border:1px solid #2a3550; background:#0f172a; color:var(--text);">
                <button type="button" class="btn-cantidad" data-target="cant-kits" data-action="plus">+</button>
              </div>
            </div>

          </div>

          <div class="cta" style="margin-top:2rem; display:flex; justify-content:center; gap:1rem;">
            <button type="submit" class="btn" style="background:var(--accent); border:none; color:#0b1220;">Calcular ahorro</button>
            <button type="button" id="btnLimpiar" class="btn btn-ghost">Limpiar</button>
          </div>
        </form>

        <!-- Resultados -->
        <div id="resultados" class="panel" style="display:none; margin-top:1.5rem; background:var(--card); border-radius:var(--radius); padding:1.5rem; text-align:center;"></div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container foot">
      <p>¬© <span id="year"></span> Aroman√≠a ¬∑ Galer√≠as Pac√≠fico</p>
      <p><a href="promociones.html">Volver arriba ‚Üë</a></p>
    </div>
  </footer>

  <!-- ====== JS ====== -->
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    // ========== Cantidades +/- (delegaci√≥n) ==========
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.btn-cantidad');
      if (!btn) return;
      const input = document.getElementById(btn.dataset.target);
      if (!input) return;
      let val = parseInt(input.value || '0', 10);
      if (btn.dataset.action === 'plus') val++;
      if (btn.dataset.action === 'minus') val = Math.max(0, val - 1);
      input.value = val;
    });

    // ========== Toggle de cantidades por checkbox ==========
    document.querySelectorAll('.producto-checkbox').forEach(cb => {
      cb.addEventListener('change', () => {
        const input = document.getElementById('cant-' + cb.value);
        input.disabled = !cb.checked;
        if (cb.checked) { input.value = Math.max(1, parseInt(input.value || '0', 10)); }
        else { input.value = 0; }
      });
    });

    // ========== Calculadora de promociones ==========
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('promocionesForm');
      const resultadosDiv = document.getElementById('resultados');
      const checkboxes = document.querySelectorAll('.producto-checkbox');

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        calcularPromocion();
      });

      document.getElementById('btnLimpiar').addEventListener('click', () => {
        form.reset();
        checkboxes.forEach(cb => {
          const input = document.getElementById('cant-' + cb.value);
          input.disabled = true; input.value = 0;
        });
        resultadosDiv.style.display = 'none';
        resultadosDiv.innerHTML = '';
      });

      function obtenerProductos() {
        const items = [];
        checkboxes.forEach(cb => {
          if (cb.checked) {
            const precio = parseFloat(cb.dataset.precio);
            const nombre = cb.dataset.nombre;
            const cant = parseInt(document.getElementById('cant-' + cb.value).value || '0', 10);
            if (cant > 0) items.push({ nombre, precio, cantidad: cant });
          }
        });
        return items;
      }

      function flattenUnidades(items){
        const arr = [];
        items.forEach(p => { for (let i=0;i<p.cantidad;i++) arr.push(p.precio); });
        return arr;
      }

      function calcularPromocion(){
        const tipo = document.getElementById('tipoPromo').value;
        if (!tipo){ alert('Por favor, seleccion√° una promoci√≥n.'); return; }
        const productos = obtenerProductos();
        if (productos.length === 0){ alert('Seleccion√° al menos un producto.'); return; }

        let res;
        if (tipo === 'ritual') res = calcRitual(productos);
        else if (tipo === 'duo') res = calcDuo(productos);
        else if (tipo === 'bienestar') res = calcBienestar(productos);
        else { alert('Promoci√≥n no v√°lida.'); return; }

        renderResultados(res, productos);
      }

      // Ritual: 40% OFF al segundo (por par) en los m√°s baratos
      function calcRitual(items){
        const subtotal = items.reduce((s,p)=>s+p.precio*p.cantidad,0);
        const unidades = flattenUnidades(items).sort((a,b)=>a-b);
        const pares = Math.floor(unidades.length/2);
        const baseDesc = unidades.slice(0, pares).reduce((s,v)=>s+v,0);
        const descuento = baseDesc * 0.40;
        return {
          subtotal,
          descuento,
          total: subtotal - descuento,
          mensaje: pares>0 ? 'Ahorraste 40% en el segundo producto con Ritual Relax üßò‚Äç‚ôÄÔ∏è'
                           : 'Agreg√° al menos 2 unidades para activar Ritual Relax.'
        };
      }

      // D√∫o: 3x2 (el m√°s barato gratis por cada grupo de 3)
      function calcDuo(items){
        const subtotal = items.reduce((s,p)=>s+p.precio*p.cantidad,0);
        const unidades = flattenUnidades(items).sort((a,b)=>a-b);
        const grupos = Math.floor(unidades.length/3);
        const descuento = unidades.slice(0, grupos).reduce((s,v)=>s+v,0);
        return {
          subtotal,
          descuento,
          total: subtotal - descuento,
          mensaje: grupos>0 ? '¬°Pag√°s 2 y te llev√°s 3 con D√∫o Arom√°tico üïØ!'
                            : 'Necesit√°s al menos 3 unidades para activar el 3x2.'
        };
      }

      // Bienestar: 10% OFF si subtotal > 35.000
      function calcBienestar(items){
        const subtotal = items.reduce((s,p)=>s+p.precio*p.cantidad,0);
        const descuento = subtotal > 35000 ? subtotal * 0.10 : 0;
        return {
          subtotal,
          descuento,
          total: subtotal - descuento,
          mensaje: descuento>0 ? '¬°Disfrutaste un 10% OFF con Bienestar Total üåø!'
                               : `Sum√° $${formatear(subtotal ? 35000 - subtotal : 35000)} para activar el 10% OFF.`
        };
      }

      function formatear(n){ return Math.round(n).toLocaleString('es-AR'); }

      function renderResultados(res, productos){
        const detalle = productos.map(p =>
          `<p style="margin:.2rem 0; text-align:left;">‚Ä¢ ${p.nombre} x${p.cantidad} ‚Äî $${formatear(p.precio*p.cantidad)}</p>`
        ).join('');

        resultadosDiv.innerHTML = `
          <h3 class="title" style="font-size:1.3rem; margin-bottom:.8rem;">üßæ Resumen de tu compra</h3>
          <div style="margin-bottom:1rem;">${detalle}</div>
          <hr style="border:1px solid rgba(255,255,255,.08); margin:1rem 0;">
          <p><strong>Subtotal:</strong> $${formatear(res.subtotal)}</p>
          <p><strong>Descuento:</strong> -$${formatear(res.descuento)}</p>
          <p style="font-size:1.2rem; margin-top:.5rem;"><strong>Total:</strong> $${formatear(res.total)}</p>
          <p style="margin-top:1rem; background:#183d2e; display:inline-block; padding:.6rem 1rem; border-radius:8px; color:#b9f6ca;">${res.mensaje}</p>
        `;
        resultadosDiv.style.display = 'block';
        resultadosDiv.scrollIntoView({ behavior:'smooth', block:'nearest' });
      }
    });
  </script>
</body>
</html>